/**
 * angular-tab
 * @version v0.0.1 - 2014-04-04
 * @link https://github.com/ariesjia/angular-tab
 * @author Chenjia <ariesjia00@hotmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("quark.tab",["quark.tab.module"]),angular.module("quark.tab.module",[]).constant("quarkTabConfig",{locationType:["path","hash","search"]}).factory("location",["$location","$route","$rootScope",function(a,b,c){return a.skipReload=function(){var d=b.current,e=c.$on("$locationChangeSuccess",function(){b.current=d,e()});return a},a}]).directive("quarkTabSet",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"src/tab-set.html",scope:{tabSkipReload:"=",tabInitActive:"=",tabLocationType:"@"},controller:["$scope","quarkTabConfig","$timeout","$filter",function(a,b,c,d){function e(){var c=(a.tabLocationType||"").toLowerCase();return b.locationType.indexOf(c)>=0?c:"path"}a.templateUrl="";var f=a.tabs=[];this.tabSkipReload=a.tabSkipReload,this.tabLocationType=e(),this.selectTab=function(a){return a.selected?!0:(angular.forEach(f,function(a){a.selected=!1}),a.selected=!0,this.setTabUrl(a.templateUrl),void 0)},this.setTabUrl=function(b){a.templateUrl=b},this.addTab=function(a){f.push(a)},c(function(){var b=d("filter")(f,{selected:!0});!b.length&&angular.isNumber(a.tabInitActive)&&a.tabInitActive<f.length&&f[a.tabInitActive].select()})}]}}).directive("quarkTab",["location",function(a){return{restrict:"EA",replace:!0,require:"^quarkTabSet",scope:{templateUrl:"@",tabMatch:"@",tabHref:"@"},transclude:!0,templateUrl:"src/tab.html",link:function(b,c,d,e){var f=e.tabLocationType,g=function(b){return a[f](b)},h=g(),i=new RegExp(b.tabMatch);e.addTab(b),b.select=function(c){var d=c||b.tabHref;e.selectTab(b),g()!=d&&(!c&&e.tabSkipReload&&a.skipReload(),g(d).replace())},i.test(h)&&b.select(h)}}}]);