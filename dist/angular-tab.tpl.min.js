/**
 * angular-tab
 * @version v0.0.11 - 2014-04-08
 * @link https://github.com/ariesjia/angular-tab
 * @author Chenjia <ariesjia00@hotmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("quark.tab",["quark.tab.template","quark.tab.module"]),angular.module("quark.tab.template",["src/tab-set.html","src/tab.html"]),angular.module("src/tab-set.html",[]).run(["$templateCache",function(a){a.put("src/tab-set.html",'<div class="md-quark-tab">\n    <ul class="tab-hd" ng-transclude>\n    </ul>\n    <div class="tab-bd" nf-if="tabNeedUrl" ng-include="templateUrl">\n    </div>\n</div>')}]),angular.module("src/tab.html",[]).run(["$templateCache",function(a){a.put("src/tab.html",'<li ng-class="{active: selected}">\n    <a ng-click="select()" ng-transclude></a>\n</li>')}]),angular.module("quark.tab.module",[]).constant("quarkTabConfig",{locationType:["url","path","hash","search"],defaultSearchName:"tab"}).factory("location",["$location","$route","$rootScope",function(a,b,c){return a.skipReload=function(){var d=b.current,e=c.$on("$locationChangeSuccess",function(){b.current=d,e()});return a},a}]).directive("quarkTabSet",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"src/tab-set.html",scope:{tabSkipReload:"=",tabInitActive:"=",tabLocationType:"@"},controller:["$scope","quarkTabConfig","$timeout","$filter",function(a,b,c,d){function e(){var c=(a.tabLocationType||"").split(":"),d=c[0].toLowerCase();return d===b.locationType[3]&&(f.tabSearchName=c.length>1?c[1]:b.defaultSearchName),b.locationType.indexOf(d)>=0?d:"path"}a.templateUrl="";var f=this,g=a.tabs=[];f.tabSkipReload=a.tabSkipReload,f.tabLocationType=e(),f.selectTab=function(a){return a.selected?!0:(angular.forEach(g,function(a){a.selected=!1}),a.selected=!0,this.setTabUrl(a.templateUrl),void 0)},f.setTabUrl=function(b){a.templateUrl=b},f.addTab=function(a){g.push(a)},c(function(){var b=d("filter")(g,{selected:!0}),c=a.tabInitActive||0;!b.length&&angular.isNumber(c)&&c<g.length&&g[c].select()})}]}}).directive("quarkTab",["location",function(a){return{restrict:"EA",replace:!0,require:"^quarkTabSet",scope:{templateUrl:"@",tabMatch:"@",tabHref:"@"},transclude:!0,templateUrl:"src/tab.html",link:function(b,c,d,e){var f=e.tabLocationType,g=function(b){return"search"==f?b?a[f](e.tabSearchName,b):a[f]()[e.tabSearchName]:a[f](b)},h=g(),i=new RegExp(b.tabMatch||b.tabHref);e.addTab(b),b.select=function(c){var d=c||b.tabHref;e.selectTab(b),g()!=d&&b.tabHref&&(!c&&e.tabSkipReload&&a.skipReload(),g(d).replace())},i.test(h)&&b.select(h)}}}]);